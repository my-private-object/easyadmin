<!DOCTYPE>
<html>
<head>
	<title>中国近代文献资源全库</title>
	<meta charset="utf-8" />
	<link rel="icon" href=" " type="image/x-icon" />
	<link rel="shortcut icon" href=" " type="image/x-icon" />
	<link rel="stylesheet" type="text/css" href="__STATIC__/qian/css/resources_list.css" />
	<link rel="stylesheet" type="text/css" href="__STATIC__/qian/css/last.css" />
	<script type="text/javascript" src="__STATIC__/qian/js/jquery.min.js" charset="utf-8"></script>
</head>
<body>
<div id="app" >

	{include file="common/header" /}

	<div id="entrance" >
		<div id="entrance_div" >
		<div id="entrance_left" >
			<a href="{:url('/gj/index')}">
			<img style="width:540px;height:90px;margin-top:36px;" src='__STATIC__/qian/images/header.png'>
			</a>
		</div>
		<ul id="entrance_right" >
			
			{if condition="$data['topData']['top_cate'] eq '' "}
			<li><span class="cate_id" style="cursor:pointer;margin-left:248px;color:red;" href="{:url('/gj/index/index')}" >首页</span></li>
			{else/}
			<li><span class="cate_id" style="cursor:pointer;margin-left:248px;" href="{:url('/gj/index/index')}" >首页</span></li>
			{/if}

			{volist name="$data['topData']['top_list']" id="vo"}
			{if condition="$vo['id'] eq $data['topData']['top_cate'] "}					
			<li><span class="cate_id" style="cursor:pointer;color:red;" href="{:url('/gj/index/sidepage')}" value="{$vo['id']}" is_top="1">{$vo['title']}</span></li>
			{else/}
			<li><span class="cate_id" style="cursor:pointer" href="{:url('/gj/index/sidepage')}" value="{$vo['id']}" is_top="">{$vo['title']}</span></li>
			{/if}
			{/volist}
		</ul>
		</div>
	</div>
	<div id="all_search" >
		<div id="all_search_div">
		<!-- <div id="book_category" >
			<ul>
				<li>报纸</li>
				<li>期刊</li>
				<li>图书</li>
				<li>图片</li>
				<li>档案</li>
			</ul>
		</div> -->
		<div id="complex_search" >
			<div id="resources_search" >资源搜索</div>
			<div id="search_box" >
				{notempty name="$data['rightData']['field']['field']['search_name']" }
					<input id="search_key" type="text" maxlength="45" value="{$data['rightData']['field']['field']['search_name']}" />
				{else/}
					<input id="search_key" type="text" maxlength="45" value="" />
				{/notempty}
			</div>
			<div id="search_button" >
				<span class="search" style="cursor:pointer;" href="{:url('/gj/index/searchPage')}">搜索</span>
			</div>
			<div id="high_search" ><a href="{:url('/gj/index/highSearchPage')}">高级搜索</a></div>
		</div>
		<div id="all_field" >
			<!-- <form action="" method="get">  -->
			<ul id="checkbox-d">
				<!-- <li>全部字段</li>		 -->
				<li style="margin-left: 6px"><input name="Fruit" type="checkbox" value="1" 
					{notempty name="$data['rightData']['field']['field']" }{in name="1" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in}{/notempty}
				/>题名 </li>

				<li><input name="Fruit" type="checkbox" value="2" {notempty name="$data['rightData']['field']['field']" }{in name="2" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in}{/notempty} />时间 </li>
				<li><input name="Fruit" type="checkbox" value="3" {notempty name="$data['rightData']['field']['field']" }{in name="3" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in}{/notempty} />著者 </li>
				<li><input name="Fruit" type="checkbox" value="4" {notempty name="$data['rightData']['field']['field']" }{in name="4" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in}{/notempty} />出版机构 </li>
				<li><input name="Fruit" type="checkbox" value="5" {notempty name="$data['rightData']['field']['field']" }{in name="5" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in}{/notempty} />出版地 </li>
			</ul>
			<!-- </form>  -->
		</div>
		<div id="hot_search" >
			<ul>
				<li>热门搜索:</li>
				<li><a href="#">中国</a></li>
				<li><a href="#">近代</a></li>
				<li><a href="#">文学</a></li>
				<li><a href="#">宗教</a></li>
			</ul>
		</div>
		</div>
	</div>
	<div id="resources" >

		<div id="tree_list" >
			<div id="left_header">
				{if condition="$data['topData']['top_cate'] eq '' "}
					<div class="left_header_name">全部 报刊/图书/图片/档案</div>
				{/if}

				{volist name="$data['topData']['top_list']" id="vo"}
					{if condition="$vo['id'] eq $data['topData']['top_cate'] "}
						<div class="left_header_name">中国近代{$vo['title']}</div>
					{/if}
				{/volist}
				<!-- <div class="left_header_name">XX分类法</div> -->
			</div>
			<ul id="header_ul">
				{volist name="$data['leftData']['left_list']" id="vo" key="index_key"}
				<!-- {$index_key} -->
				<li class="nav">

					<div class="left_title">
					{if condition="$vo['id'] eq $data['leftData']['left_cate'] "}					
					<span class="cate_bid" style="cursor:pointer;color:red;" href="{:url('/gj/index/sidepage')}" value="{$vo['id']}" is_left="1">{$vo['title']}</span>
					{else/}
					<span class="cate_bid" style="cursor:pointer" href="{:url('/gj/index/sidepage')}" value="{$vo['id']}" is_left="">{$vo['title']}</span>
					{/if}
					
					{php} if(isset($vo['action'])) { {/php}			
					<span class="symbol" style="cursor:pointer; float:right; margin-right:22px;" >
						<img class='jia' style="width: 12px; width: 12px; margin-top:3px;" src="__STATIC__/qian/images/jia.png" hidden>
						<img class='jian_hei' style="width: 12px; width: 12px; margin-top:3px;" src="__STATIC__/qian/images/jian_hei.png" >
					</span>
					{php} } else { {/php}
					<span class="symbol" style="cursor:pointer; float:right; margin-right:22px;" >
						<img class='jia' style="width: 12px; width: 12px; margin-top:3px;" src="__STATIC__/qian/images/jia.png" >
						<img class='jian_hei' style="width: 12px; width: 12px; margin-top:3px;" src="__STATIC__/qian/images/jian_hei.png" hidden>
					</span>
					{php}}{/php}
					</div>

					{volist name="$data['leftData']['left_list'][$index_key - 1][0]" id="two_vo"}
					{php} if(isset($vo['action'])) { {/php}
					<ul style="margin-top: 5px;">
						<li>
							{if condition="$two_vo['id'] eq $data['leftData']['left_cate'] "}			
							<span class="cate_wbid" style="cursor:pointer;color:red;" href="{:url('/gj/index/sidepage')}" value="{$two_vo['id']}" is_left="1">{$two_vo['title']}</span>
							{else/}
							<span class="cate_wbid" style="cursor:pointer" href="{:url('/gj/index/sidepage')}" value="{$two_vo['id']}" is_left="">{$two_vo['title']}</span>
							{/if}
						</li>
					</ul>
					{php} } else { {/php}
					<ul style="margin-top: 5px;" hidden>
						<li>
							{if condition="$two_vo['id'] eq $data['leftData']['left_cate'] "}			
							<span class="cate_wbid" style="cursor:pointer" href="{:url('/gj/index/sidepage')}" value="{$two_vo['id']}" is_left="1">{$two_vo['title']}</span>
							{else/}
							<span class="cate_wbid" style="cursor:pointer" href="{:url('/gj/index/sidepage')}" value="{$two_vo['id']}" is_left="">{$two_vo['title']}</span>
							{/if}
						</li>
					</ul>
					{php}}{/php}
					{/volist}


				</li>
				{/volist}

			</ul>
		</div>
		<div id="books_list" >
			<div id="navigation" >
				<div id="navigation_content" >
					<span>当前位置：</span>
					{if condition="$data['topData']['top_cate'] eq '' "}
					<span>全部</span>
					{else/}
						{volist name="$data['topData']['top_list']" id="vo"}
						{if condition="$vo['id'] eq $data['topData']['top_cate'] "}	
							<span>{$vo['title']}</span>
						{/if}
						{/volist}
					{/if}

					{if condition="$data['leftData']['left_cate'] neq '' "}
					{volist name="$data['leftData']['left_list']" id="l_vo"}
					{notempty name="$l_vo['action']" }
						<span> / {$l_vo['title']}</span>
					{/notempty}
					{/volist}
					{/if}

					{if condition="$data['leftData']['left_cate'] neq '' "}
					{volist name="$data['leftData']['left_list']" id="l_vo"}
					{notempty name="$l_vo['action']" }
					{if condition="$l_vo['pid'] eq $data['leftData']['left_cate']"}
						<span> / {$l_vo['title']}</span>
					{else/}
						{volist name="$l_vo[0]" id="l_vo_child"}
						{if condition="$l_vo_child['id'] eq $data['leftData']['left_cate']"}
							<span> / {$l_vo_child['title']}</span>
						{/if}
						{/volist}
					{/if}
					{/notempty}
					{/volist}
					{/if}
				</div>
				<div id="sort" >
					<div id="sort_content" >
						<div style="float:left;">
							{if condition="$data['rightData']['param']['list_type'] eq 1"}
							<span class="list_1" href="{:url('/gj/index/searchPage')}" value="1" is_type="1" style="color:red;cursor:pointer;">列表</span>
							{else/}
							<span class="list_1" href="{:url('/gj/index/searchPage')}" value="1" is_type="0" style="cursor:pointer;">列表</span>
							{/if}
							/
							{if condition="$data['rightData']['param']['list_type'] eq 2"}
							<span class="list_1" href="{:url('/gj/index/searchPage')}" value="2" is_type="1" style="color:red;cursor:pointer;">图片</span>
							{else/}
							<span class="list_1" href="{:url('/gj/index/searchPage')}" value="2" is_type="0" style="cursor:pointer;">图片</span>
							{/if}
						</div>
						<span style="margin-left: 20px" >

							{if condition="$data['rightData']['param']['is_sort'] eq 3 "}
							<span class="is_sort" href="{:url('/gj/index/searchPage')}" style="color:red;cursor:pointer;" value="3" is_sort="1">点击量排序</span>
							{else /}
							<span class="is_sort" href="{:url('/gj/index/searchPage')}" style="cursor:pointer;" value="3" is_sort="0">点击量排序</span>
							{/if}
							 / 
							{if condition="$data['rightData']['param']['is_sort'] eq 2 "}
							<span class="is_sort" href="{:url('/gj/index/searchPage')}" style="color:red;cursor:pointer;" value="2" is_sort="1">首字母排序</span>
							{else /}
							<span class="is_sort" href="{:url('/gj/index/searchPage')}" style="cursor:pointer;" value="2" is_sort="0">首字母排序</span>
							{/if}
							 / 
							{if condition="$data['rightData']['param']['is_sort'] eq 1 "}
							<span class="is_sort" href="{:url('/gj/index/searchPage')}" style="color:red;cursor:pointer;" value="1" is_sort="1">时间排序</span>
							{else /}
							<span class="is_sort" href="{:url('/gj/index/searchPage')}" style="cursor:pointer;" value="1" is_sort="0">时间排序</span>
							{/if}

						</span>
						<!-- <span><a href="#">图片</a> / <a href="#">列表</a></span>
						<span style="margin-left: 20px" >
							<a href="#">点击量排序</a> / 
							<a href="#">首字母排序</a> / 
							<a href="#">时间排序</a>
						</span> -->
					</div>
				</div>
			</div>

			<div id="content_list" >
								{php} if (empty($data['rightData']['param']['list_type']) or $data['rightData']['param']['list_type'] == 1) { {/php}
				<ul class="list_1" list_type="1">
					{volist name="$data['rightData']['search_list']['list']" id="vo"}
					<li style="width:685px;height:168px;margin-top: 15px; margin-left: 15px;">
						<div class="content_image">
							<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank" >
								<img src="{$vo.logo}" />
							</a>
						</div>
						<div class="content_info">
							<div class="info_frame" style="margin-top: 20px; " >
								<span class="info_list" style="color:#446D6D;width:57px;">书&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名:</span>
								<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank">
									<span class="info_list" style="color:black;width:357px;">{$vo.title}</span>
								</a>
							</div>
							<div class="info_frame" >
								<span class="info_list" style="color:#446D6D;width:57px;">著&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;者:</span>
								<!-- <a href="#"> -->
								<span class="info_list" style="color:black;width:357px;">{$vo.id}{$vo.title}</span>
								<!-- </a> -->
							</div>
							<div class="info_frame" >
								<span class="info_list" style="color:#446D6D;width:57px;">出版机构:</span>
								<!-- <a href="#"> -->
									<span class="info_list" style="width:357px;">{$vo.id}{$vo.title}</span>
								<!-- </a> -->
							</div>
							<div class="info_frame" >
								<span class="info_list" style="color:#446D6D;width:57px;">出版时间:</span>
								<!-- <a href="#"> -->
									<span class="info_list" style="width:357px;">{$vo.id}{$vo.title}</span>
								<!-- </a> -->
							</div>
						</div>
						<div class="content_href" style="width:20px;height:121px;border-top:0px;border-right:1px solid #A8A8A8;float:right;margin-right: 15px;margin-top: 22px;" >
							<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank" style="line-height:15px;margin:0px;width:20px;height:10px;" >阅读</a><p>
							<a href="#" style="line-height:15px;margin:0px;width:20px;height:10px;">收藏</a><p>
							<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank" style="line-height:15px;margin:0px;width:20px;height:10px;">详情</a>
						</div>
					</li>
					{/volist}
					<div style=" clear:both;"></div>
				</ul>
				{php} } else { {/php}
				<ul class="list_1" list_type="2">
					{volist name="$data['rightData']['search_list']['list']" id="vo" mod="2"}

					{eq name="mod" value="1"}
					<li style="margin-top: 15px; margin-left: 15px;">
					{/eq}
					{eq name="mod" value="0"}
					<li style="margin-top: 15px; margin-left: 15px; ">
					{/eq}
						<div class="content_image">
							<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank" >
								<img src="{$vo.logo}" />
							</a>
						</div>
						<div class="content_info">
							<div class="info_frame" style="margin-top: 20px; " >
								<span class="info_list" style="color:#446D6D;width:57px;">书&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名:</span>
								<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank">
									<span class="info_list" style="color:black;">{$vo.title}</span>
								</a>
							</div>
							<div class="info_frame" >
								<span class="info_list" style="color:#446D6D;width:57px;">著&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;者:</span>
								<!-- <a href="#"> -->
								<span class="info_list" style="color:black;">{$vo.id}{$vo.title}</span>
								<!-- </a> -->
							</div>
							<div class="info_frame" >
								<span class="info_list" style="color:#446D6D;width:57px;">出版机构:</span>
								<!-- <a href="#"> -->
									<span class="info_list">{$vo.id}{$vo.title}</span>
								<!-- </a> -->
							</div>
							<div class="info_frame" >
								<span class="info_list" style="color:#446D6D;width:57px;">出版时间:</span>
								<!-- <a href="#"> -->
									<span class="info_list">{$vo.id}{$vo.title}</span>
								<!-- </a> -->
							</div>
						</div>
						<div class="content_href">
							<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank" style="margin-left: 2px;" >阅读</a>
							<a href="#" style="margin-left: 60px;">收藏</a>
							<a href="{:url('/gj/index/details',['book'=>$vo.id] )}" target="_blank" style="margin-left: 160px;">详情</a>
						</div>
					</li>
					{/volist}
					<div style=" clear:both;"></div>
				</ul>
				{php} } {/php}
				<div style=" clear:both;"></div>
			</div>

			<div id="page">
				<span> 
					<span>
					<span>第</span> 
					<span>{$data['rightData']['search_list']['page']['now_page']}</span>/
					<span>{$data['rightData']['search_list']['page']['all_page']}</span><span> 页 共: </span>
					<span>{$data['rightData']['search_list']['page']['count']}</span><span> 册  </span>
					</span>
					<span>
					<span class="page" style="cursor:pointer; " href="{:url('/gj/index/searchPage')}" page="1"> 首页 </span>
					<span class="page" style="cursor:pointer" href="{:url('/gj/index/searchPage')}" page="{$data['rightData']['search_list']['page']['up_page']}"> 上一页 </span>
					<span class="page" style="cursor:pointer" href="{:url('/gj/index/searchPage')}" page="{$data['rightData']['search_list']['page']['down_page']}"> 下一页 </span>
					<span class="page" style="cursor:pointer" href="{:url('/gj/index/searchPage')}" page="{$data['rightData']['search_list']['page']['all_page']}"> 尾页 </span>
					</span>
				</span>
				<span id="jump_page" style="margin:4 10 0 20; vertical-align:text-bottom;" >
					<input type="text" name="jump_page" size="1" maxlength="4" />
				</span>					
				<span>
					<span class="page" style="cursor:pointer" href="{:url('/gj/index/searchPage')}" page="jump_page"> 跳转 </span>
				</span>
				{notempty name="$data['rightData']['field']['field']" }
				<span id="hidden_1" value="{$data['rightData']['field']['field']['con']}"  hidden></span>
				<span id="hidden_2" value="{$data['rightData']['field']['field']['type']}"  hidden></span>
				<span id="hidden_3" value="{$data['rightData']['field']['field']['name']}"  hidden></span>
				<span id="hidden_5" value="{$data['rightData']['field']['field']['cate_id']}"  hidden></span>
				<span id="hidden_6" value="{$data['rightData']['field']['field']['cate_bid']}"  hidden></span>
				<span id="hidden_7" value="{$data['rightData']['field']['field']['cate_wbid']}"  hidden></span>
				<span id="hidden_8" value="{$data['rightData']['field']['field']['search_name']}"  hidden></span>

				<input name="Fruit_page" type="checkbox" value="1" {in name="1" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in} hidden />
				<input name="Fruit_page" type="checkbox" value="2" {in name="2" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in} hidden />
				<input name="Fruit_page" type="checkbox" value="3" {in name="3" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in} hidden />
				<input name="Fruit_page" type="checkbox" value="4" {in name="4" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in} hidden />
				<input name="Fruit_page" type="checkbox" value="5" {in name="5" value="$data['rightData']['field']['field']['checkbox']"}checked="checked"{/in} hidden />	

				{/notempty}
				{notempty name="$data_json"}
				<span id="hidden_4" href="{:url('/gj/index/highSearchPage')}" value="{$data_json}" hidden ></span>
				{/notempty}
			</div>
		</div>
	</div>
	

	{include file="common/last" /}


</div>
</body>

</html>

<form>
	<botton id="test"></botton>
</form>
<script type="text/javascript">

// 加减号处理
$(".symbol").on("click",function(){
	if ($(this).parent().nextAll().is(':hidden')) {
		$(this).parent().nextAll().show()
		// $(this).html('-')
		$(this).find(".jia").hide()
		$(this).find(".jian_hei").show()
	} else{
		$(this).parent().nextAll().hide()
		// $(this).html('+')
		$(this).find(".jian_hei").hide()
		$(this).find(".jia").show()		
	}
})

$("span").on("click",function(){

	// 获取当前 分类的基本属性 value 类别值，href 连接，class 类别属性 用来判定 1级或2级
	var href = $(this).attr('href');
	var value = $(this).attr('value');
	var class_name = $(this).attr('class');

	var cate_id = '';
	var cate_bid = '';
	var cate_wbid = '';

	if (class_name == 'cate_id') {				// 1级分类的跳转

		// 判断上部分类无类别 或 没有指定类别
		if ( typeof(value) == "undefined" ) {
			cate_id = '';
		} else {
			cate_id = value;
		}
		
		submitForm(href, cate_id, cate_bid, cate_wbid)

 	} else if(class_name == 'cate_bid') {		// 2级分类的跳转

 		var cate_id = getTopMenuCate();
		cate_bid = value; 
		submitForm(href, cate_id, cate_bid, cate_wbid)

 	} else if(class_name == 'cate_wbid') {

 		var cate_id = getTopMenuCate();
 		cate_wbid = value;
 		submitForm(href, cate_id, cate_bid, cate_wbid)

 	} else if(class_name == 'page') {			// 分页的跳转

 		var high_search = $("#hidden_4").attr('value');
 		console.log(high_search);
 		// 判断上部分类无类别 或 没有指定类别
		if ( typeof(high_search) == "undefined" ) {
			page($(this));
		} else {
			highPage($(this));
		}
 		return;
 		

 	} else if(class_name == 'list_1') {
 		window.is_type = 1;
 		window.list_type = value;

 		$(".is_sort").each(function(ii,vv){
		    if ($(vv).attr('is_sort') == 1) {
		    	is_sort = $(vv).attr('value');
		    }
		});

 		window.is_sort = is_sort;

 		page($(this));
 	} else if(class_name == 'is_sort') {
 		window.is_type = 2;
 		window.is_sort = value;

 		$(".list_1").each(function(ii,vv){
		    if ($(vv).attr('is_type') == 1) {
		    	list_type = $(vv).attr('value');
		    }
		});

 		window.list_type = list_type

 		page($(this));
 	} else if ( class_name == 'search' ) {

 		var checkbox = '';

 		$("input[name='Fruit']:checked").each(function (index, item) {
        
	        if ($("input[name='Fruit']:checked").length-1==index) {
	            checkbox += $(this).val();
	        } else {
	            checkbox += $(this).val() + ",";
	        }  
	    });
 		// alert(checkbox);
 		var searchValue = $("#search_key").val();

 		// 循环获取第一分类
 		$(".cate_id").each(function(ii,vv){
		    //ii 指第几个元素的序列号。
		    //vv 指遍历得到的元素。
		    if ($(vv).attr('is_top') == 1) {
		    	// console.log($(vv).html());
		    	// console.log($(vv).attr('value'));
		    	cate_id = $(vv).attr('value')
		    }
		});

 		// 循环获取第二分类
 		$(".cate_bid").each(function(ii,vv){
		    if ($(vv).attr('is_left') == 1) {
		    	cate_bid = $(vv).attr('value')
		    }
		});

 		// 循环获取第三分类
 		$(".cate_wbid").each(function(ii,vv){
		    if ($(vv).attr('is_left') == 1) {
		    	cate_wbid = $(vv).attr('value')
		    }
		});

 		submitForm(href, cate_id, cate_bid, cate_wbid, page='', searchValue, checkbox);

 	}


});

// 获取上部分类的指向
function getTopMenuCate() {
	
	obj = $("span[is_top = 1]");
	cate_id = obj.attr('value');

	// 判断上部分类无类别 或 没有指定类别
	if ( typeof(cate_id) == "undefined" ) {
		cate_id = '';
	}

	return cate_id;

}


// 获取左侧分类的指向
function getLeftMenuCate() {

	var cate_bid = '';
	var cate_wbid = '';

	// 获取左侧分类的指向
	obj = $("span[is_left = 1]");
	value = obj.attr('value');
	class_name = obj.attr('class');

	// 获取左侧类别
	if (class_name == 'cate_bid') {
		cate_bid = value;
	} else if (class_name == 'cate_wbid') {
		cate_wbid = value; 
	}

	// 判断左侧分类无类别 或 没有指定类别
	if ( typeof(cate_bid) == "undefined") {
		cate_bid = '';
	} else if ( typeof(cate_wbid) == "undefined" ) {
		cate_wbid = '';
	} 

	data = {};
	data.cate_bid = cate_bid;
	data.cate_wbid =cate_wbid;

 	return data;

}

// 获取右侧内容展示条件
function rightList() {

	list_type = '';
	is_sort = '';

	// 循环获取第二分类
	$(".list_1").each(function(ii,vv){
	    if ($(vv).attr('is_type') == 1) {
	    	list_type = $(vv).attr('value');
	    }
	});

	$(".is_sort").each(function(ii,vv){
	    if ($(vv).attr('is_sort') == 1) {
	    	is_sort = $(vv).attr('value');
	    }
	});

	var param = {
		"list_type": list_type,
		"is_sort": is_sort
	}

	return param;

}

// 分页提交
function page(e) {

	 	// 获取 page 基本属性 - page 页码数，href 连接
 		page = $(e).attr('page');
 		href = $(e).attr('href');

 		// 判断 input 输入框跳转
 		if ( page == 'jump_page') {
 			page = $("input[name='jump_page']").val();
 		}
 		checkbox = ''

 		$("input[name='Fruit_page']:checked").each(function (index, item) {
        
	        if ($("input[name='Fruit']:checked").length-1==index) {
	            checkbox += $(this).val();
	        } else {
	            checkbox += $(this).val() + ",";
	        }  
	    });

 		var con = $("#hidden_1").attr('value');
 		var type = $("#hidden_2").attr('value');
 		var name = $("#hidden_3").attr('value');
 		var cate_id = $("#hidden_5").attr('value');
 		var cate_bid = $("#hidden_6").attr('value');
 		var cate_wbid = $("#hidden_7").attr('value');
 		var search_name = $("#hidden_8").attr('value');
 		console.log(con);
 		console.log(type);
 		console.log(name);
 		var search_page = {
 			"con": con,
 			"type": type,
 			"name": name,
 			"cate_id": cate_id,
 			"cate_bid": cate_bid,
 			"cate_wbid": cate_wbid,
 			"search_name": search_name,
 			"checkbox": checkbox
 		}
 		console.log(search_page);
 		console.log(checkbox);

 		// 获取上部分类ID
 		// var cate_id = getTopMenuCate();
 		// 获取左侧分类ID
 		var left_cate = getLeftMenuCate();

 		var searchValue = $("#search_key").val();

 		submitForm(href, cate_id, left_cate.cate_bid, left_cate.cate_wbid, page, searchValue, checkbox, search_page)

}

// 表单提交
function submitForm(href, cate_id, cate_bid='', cate_wbid='', page='', searchValue='', checkbox='', search_page='') {
	
	param = {};
    if (window.is_type == 1 || window.is_type == 2) {
    	param['list_type'] = window.list_type;
    	param['is_sort'] = window.is_sort;
    } else {
    	param = rightList();	
    }
    
    console.log(param['list_type']);

	// alert(checkbox);
    $("body").append("<form></form>");
    // $("body").find("form").attr("action", 'http://localhost:81'+href);
     $("body").find("form").attr("action", href);
    // $("body").find("form").attr("action", {:url('Index/index/test')});
    $("body").find("form").attr("method", "post");
    $("body").find("form").attr("style", "display:none");
    // $.each(params, function (k, v) {
    // $("body").find("form").append("<input type='text' name='" + field + "' value = '" + value + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'top_cate' + "' value = '" + cate_id + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'left_cate[cate_bid]' + "' value = '" + cate_bid + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'left_cate[cate_wbid]' + "' value = '" + cate_wbid + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'page' + "' value = '" + page + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'search' + "' value = '" + searchValue + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'checkbox' + "' value = '" + checkbox + "'></input>");


    if ( search_page != '' ) {
	    $("body").find("form").append("<input type='text' name='" + 'search_field[con]' + "' value = '" + search_page['con'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[type]' + "' value = '" + search_page['type'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[name]' + "' value = '" + search_page['name'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[cate_id]' + "' value = '" + search_page['cate_id'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[cate_bid]' + "' value = '" + search_page['cate_bid'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[cate_wbid]' + "' value = '" + search_page['cate_wbid'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[search_name]' + "' value = '" + search_page['search_name'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'search_field[checkbox]' + "' value = '" + search_page['checkbox'] + "'></input>");
	    $("body").find("form").append("<input type='text' name='" + 'check_type[list_type]' + "' value = '" + param['list_type'] + "'></input>");

    	$("body").find("form").append("<input type='text' name='" + 'check_type[is_sort]' + "' value = '" + param['is_sort'] + "'></input>");
    }

    $("body").find("form").submit();

}

// 高级分页提交
function highPage(e) {

	 	// 获取 page 基本属性 - page 页码数，href 连接
	 	page = $(e).attr('page');
 		high_value = $("#hidden_4").attr('value');
 		href = $("#hidden_4").attr('href');

 		// 判断 input 输入框跳转
 		if ( page == 'jump_page') {
 			page = $("input[name='jump_page']").val();
 		}

 		// 获取上部分类ID
 		var cate_id = getTopMenuCate();
 		// 获取左侧分类ID
 		var left_cate = getLeftMenuCate();

 		var searchValue = $("#search_key").val();

 		highSubmitForm(href, cate_id, left_cate.cate_bid, left_cate.cate_wbid, page, searchValue, checkbox='', high_value)

}


// 表单提交
function highSubmitForm(href, cate_id, cate_bid='', cate_wbid='', page='', searchValue='', checkbox='', high_value='') {

    $("body").append("<form></form>");
    $("body").find("form").attr("action", href);
    // $("body").find("form").attr("action", 'http://localhost:81'+href);
    // $("body").find("form").attr("action", {:url('Index/index/test')});
    $("body").find("form").attr("method", "post");
    $("body").find("form").attr("style", "display:none");
    // $.each(params, function (k, v) {
    // $("body").find("form").append("<input type='text' name='" + field + "' value = '" + value + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'top_cate' + "' value = '" + cate_id + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'left_cate[cate_bid]' + "' value = '" + cate_bid + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'left_cate[cate_wbid]' + "' value = '" + cate_wbid + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'page' + "' value = '" + page + "'></input>");
    $("body").find("form").append("<input type='text' name='" + 'search' + "' value = '" + searchValue + "'></input>");

    $("body").find("form").append("<input type='text' name='" + 'high_value' + "' value = '" + high_value + "'></input>");

    $("body").find("form").append("<input type='text' name='" + 'action' + "' value = 'highSearchPage' ></input>");


    $("body").find("form").submit();

}



</script>
