<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>中国近代文献资源全库</title>
	<link rel="icon" href=" " type="image/x-icon" />
	<link rel="shortcut icon" href=" " type="image/x-icon" />
	<link rel="stylesheet" href="__STATIC__/qian/other/dhminguo/common.css" type="text/css">
  	<link rel="stylesheet" href="__STATIC__/qian/other/dhminguo/platform.css" type="text/css">
  	<link rel="stylesheet" href="__STATIC__/qian/other/dhminguo/listByGroup.css" type="text/css">
  	<link rel="stylesheet" href="__STATIC__/qian/other/dhminguo/wy-mod-banner.css" type="text/css">
  	<link rel="stylesheet" href="__STATIC__/qian/other/bootstrap/buttons.css" type="text/css">
  	<link rel="stylesheet" href="__STATIC__/qian/other/MessageUtil.css" type="text/css">

  	<script type="text/javascript">path = '';basePath = '';forwardUrl = "";	</script>
  	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/js/MessageUtil.js"></script>
  	<script src="__STATIC__/qian/other/viewsjs/common/sha1.js" type="text/javascript"></script>
  	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/viewsjs/common/platform.js"></script>
  	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/viewsjs/dhminguo/common.js?v=1.1.1"></script>
  	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/viewsjs/dhminguo/platform.js"></script>
  	<script type='text/javascript' src="__STATIC__/qian/other/dwr/engine.js"> </script>
	<script type='text/javascript' src="__STATIC__/qian/other/dwr/util.js"> </script>
	<script type='text/javascript' src="__STATIC__/qian/other/dwr/interface/sysUserPlatformFacade.js"></script>
	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/js/jquery-1.4.2.js"></script>
	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/viewsjs/common/menuNav.js"></script>
    
    
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/layer/lib.js"></script>
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/layer/layer.min.js"></script>
 

<head>
	<meta name="renderer" content="webkit" charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta http-equiv="Pragma" content="no-cache">

	<title>阅读器</title>

	<link href="__STATIC__/qian/other/resources/base.css" rel="stylesheet" type="text/css">
	<link href="__STATIC__/qian/other/resources/reader.css" rel="stylesheet" type="text/css">
<!--
	<link href="http://182.18.36.71/platform/resources/css/common.css?version=1.1.7" rel="stylesheet" type="text/css">
-->
<!--
	<link rel="shortcut icon" href="http://www.hwshu.com/resources/front/mg/images/top_logo.png" type="image/x-icon">
-->
<!--
	<link rel="stylesheet" href="http://182.18.36.71/platform/resources/css/viewer.css">
-->
	<link rel="stylesheet" href="__STATIC__/qian/other/resources/book.css">
	<!-- 弹出信息插件 -->
	<link rel="stylesheet"  href="__STATIC__/qian/other/layer/skin/layer.css" >
	<link rel="stylesheet"  href="__STATIC__/qian/other/resources/index3.css" >
	<link rel="stylesheet"  href="__STATIC__/qian/other/resources/page.css" >

</head>
<body>


<!-- Copyright © 2005. Spidersoft Ltd -->
<style>
A.applink:hover {border: 2px dotted #DCE6F4;padding:2px;background-color:#ffff00;color:green;text-decoration:none}
A.applink       {border: 2px dotted #DCE6F4;padding:2px;color:#2F5BFF;background:transparent;text-decoration:none}
A.info          {color:#2F5BFF;background:transparent;text-decoration:none}
A.info:hover    {color:green;background:transparent;text-decoration:underline}
</style>
<!-- <div style='BORDER: 1px solid #DCE6F4; MARGIN-TOP: 20px; MARGIN-BOTTOM: 20px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 5px; PADDING: 5px; BACKGROUND-COLOR: #eef8ff;line-height:180%; COLOR: #000000; font-family: Arial; font-size: 8pt; width=100%; FILTER: progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr="#FFFFFFFF", EndColorStr="#F2F5FAFF");'>
This page was saved using <a class="applink" href="http://www.spidersoft.com"><b>WebZIP 7.0.3.1030</b></a> <a class="applink" href="http://www.spidersoft.com"><b>offline browser</b></a>  on  12/20/20 13:19:03.<br>
<b>Address:</b> <a class="info" href="http://182.18.36.71/pj/read.htm?rsdaId=711521604132233&keyWord=&pageId=1">http://182.18.36.71/platform/read.htm?rsdaId=711521604132233&keyWord=&pageId=1</a><br>
<b>Title:</b> 中国近代文献资源全库 &nbsp;&bull;&nbsp; <b>Size:</b> 15326<br></div>-->
<!-- /Copyright © 2005. Spidersoft Ltd -->



 	<!--========================会员登录 开始==========================-->
	<div id="comeOut" style="display: none;">
		<div id="bg" class="bg">
		</div>
		<div id="content" class="mydiv">
		</div>
	</div>
	<div id="loginDiv" style="display: none; position:relative; z-index:5000">
		<div id="bg" class="bg"></div>
		<div id="content" class="mydiv" style="background: #fff;">
		    <div class="login" id="login">
		    	<h3 class="login_title" style="border-left:0">中国近代文献资源全库</h3>
		    	<ul>
		        	<li>
		        		<span class="login_info">
		        			<i style="background-position:-12px"></i>
		        			<input class="login_input" id="loginName" value="" type="text" onkeydown="onFormEnterKeyDown(event)" tabindex="1"/>
		        		</span>
		        		<span class="login_msg"> 没有账号?<a href="http://182.18.36.71/member/memberRegister.htm">立即注册>></a></span>
	        		</li>
		            <li>
		            	<span class="login_info">
		            		<i style="background-position:-52px"></i>
		            		<input class="login_input" id="password" value="" type="password" onkeydown="onFormEnterKeyDown(event)" tabindex="2"/>
	            		</span>
	            		<span class="login_msg"></span>
            		</li>
		            <li>
		            	<a class="button glow button-rounded button-flat" style="height: 35px;font-size: 16px;text-decoration: none;width: 70px;line-height: 35px;" href="javascript:void(0);" onclick="return login();">登录</a>
		            	<a class="button glow button-rounded button-flat" style="height: 35px;font-size: 16px;text-decoration: none;width: 70px;line-height: 35px;margin-left: 5px;" href="javascript:hideLoginDiv();" style="margin-left:15px">关闭</a>
		            	<p  class="clear"></p>
		            	<p id="errorMsg" class="login_msg" style="color:#FF0000;float:left;"></p>
	            	</li>
		            
		        </ul>
		    </div>
		</div>
	</div>
    <!--========================会员登录 结束==========================-->


<div class="base_bg">
	<div class="base_logo">
		<div class="reader_list">

			<div id="zoomRate" style="display: none;" class="zoomRate"><input id="editZoomRate"  value="200" type="text" name="editZoomRate" style="width:40px"/></div>
			<div class="smt toolbar">
				<div class="toolbar-title" title=""></div>
				<div class="title-content">
					<div class="title-icon book-name-list" title="书名滚动"></div>

					<a id="viewTypeSingle" title="单本翻页阅读模式" href="javascript:;" class="title-icon toolbar-view-btn toolbar-view-btn-single toolbar-view-btn-selected "><i></i></a>
					<a id="viewTypeDouble" title="双页翻页模式" href="javascript:;" class="title-icon toolbar-view-btn toolbar-view-btn-double"><i></i></a>
					<!-- <a id="viewTypeScroll" title="列表滚动模式" href="javascript:;" class="title-icon toolbar-view-btn toolbar-view-btn-scroll"><i></i></a> -->
					<div class="title-icon  title-panel-bbar">
						<div class="l-panel-bbar-inner">
							<div class="l-bar-group scroll-stop-click">
								<div class="l-bar-button l-bar-btnfirst" title="第一页"><span class="l-disabled" style="margin-top: 4px;"></span></div>
								<div class="l-bar-button l-bar-btnprev" title="上一页"><span class="l-disabled"></span></div>
							</div>
							<div class="l-bar-group" >
								<span class="pcontrol" style="font-size: 14px;">
								<input id="updatePageNum"  type="text" size="4" value="1" style="width:25px;  height: 18px;"> <span class="num-pi">/</span>
								<span id="pageCount"></span>
								</span>
							</div>
							<div class="l-bar-group l-bar-group-go updatePageNumBtn">翻页</div>
							<div class="l-bar-group scroll-stop-click">
								<div class="l-bar-button l-bar-btnnext" title="下一页"><span class="l-disabled"></span></div>
								<div class="l-bar-button l-bar-btnlast" title="最后一页"  style="margin-top: 1px;"><span class="l-disabled"></span></div>
							</div>
							<div class="l-clear"></div>
						</div>
					</div>
					<div id="zoomOut"  title="放大" class="title-icon  icon-zoomOut"></div>
					<div id="zoomIn"  title="缩小" class="title-icon icon-zoomIn"></div>
				<!-- 	<div id="print"  title="添加书签" class="title-icon toolbar-button-addReaderTag  add-tag"></div>
					<div id="tagList"  title="书签列表" class="title-icon toolbar-button-addReaderTagList tag-list"></div>

					<div id="addNode"  title="添加笔记" class="title-icon add-note"></div>
					<div id="nodeList"  title="笔记列表" class="title-icon note-list"></div>
					<div id="favorite"  title="收藏" class="title-icon favorite" style="display: none"></div> -->
				</div>
				<!-- <div class="toolbar-search toolbar-search-global">
					<input id="J_BookSearchInput" class="toolbar-search-input" placeholder="内容搜索" type="text">
					<span id="J_BookSearchBtn" class="toolbar-search-btn" href="javascript:;"></span>
				</div> -->
			</div>

			<!-- 内容 B -->
			<div class="smc book-view">
				<div id="bookBox" class="gd_right">
					<div id="bookWrap" class="books"> 
                        <div  class="clearcss box_content"  id="box_content">
							<div class="page_content">
								<div id="pageCurrent" class="page"></div>

								<div id="pageNext" class="page"></div>
							<span class="leftTop turnPage"></span>
							<span class="rightTop turnPage"></span>
							<span class="leftBottom turnPage"></span>
							<span class="rightBottom turnPage"></span>

							<span id = "leftTopMask" class="leftTopMask turnPageMask"></span>
							<span id = "rightTopMask" class="rightTopMask turnPageMask"></span>
							<span id = "leftBottomMask" class="leftBottomMask turnPageMask"></span>
							<span id = "rightBottomMask" class="rightBottomMask turnPageMask"></span>
							</div>
                        </div> 
                        <div class="scoroolWrapper">
							<div id="pageCurrent" class="page"></div>
							<div id="pageNext" class="page"></div>
							<div id="pageLast" class="page"></div>
						</div>
                    </div>
				</div>
				<div id="J_Cata" class="gd_left" style="display: none;">
					<h2>本书目录</h2>
					<ul class="mulu_mode3"></ul>
				</div>
				<div id="J_CataToggle" class="yd_mulu mulu_mode3_right"  style="display: none">
					目<br>录<br><span class="yd_mulu_right" style="display:none;">&gt;&gt;</span>
					<span class="yd_mulu_left">&lt;&lt;</span>
				</div>

				<!-- 全书搜索 S -->
				<div id="J_SearchAll" class="search-all-box" style=" display: none">
					<div class="search-all-wrap">
						<div class="search-all-box-header">搜索结果 <a id="J_SearchClear" class="search-all-clear" title="清空搜索结果" href="javascript:;">×</a></div>
<!--
						<div class="search-all-box-header-tips">使用空格分开多个检索词可以同时检索(最多检索3个)，例如"瀚文 民国 书库"</div>
-->
						<div id="J_SearchAllTitle" class="search-all-box-title"></div>
						<div id="J_SearchAllList" class="search-all-box-list"></div>

					</div>
					<div class="button-show">&lt</div>
				</div>
				<div id="J_SearchAllToggle" class="search-all-toggle" style="display: none;">
                    搜<br>索<br>结<br>果<br>
					<span class="search-all-toggle-fold">&gt;&gt;</span>
					<span class="search-all-toggle-expand">&lt;&lt;</span>
				</div>
				<!-- 全书搜索 E -->
			</div>
			<div class="clear"></div>
			<!-- 内容 E -->
		</div>
	</div>
</div>
<div class="layui-layer-shade" id="layui-layer-shade2" times="2" style="display: none;z-index:19891015;background-color:#000;opacity:0.3;filter:alpha(opacity=30);" ></div>
<div class="layui-layer layui-anim layui-layer-dialog "  style="display: none;z-index: 19891017; margin-left: -170px" id="layui-layer2" type="dialog" times="2" showtime="0"
	 contype="string" style="z-index: 19891016; width: 330px; height: auto; top: 100px; left: 509.5px;">
	<div class="layui-layer-title"
		 style="font-size: 18px; background: #927c65; color: rgb(255, 255, 255); ">
	</div>
	<div class="layui-layer-content">
		<div class="download-dialog">
			<div id="addreadertagForm">
				<label>页 码： </label>
				<input type="text"  class="download-dialog-start" name="pageSeq" id="pageSeq"> <br>
			</div>
			<div id="addInput">

			</div>
		</div>
	</div>
	<span class="layui-layer-setwin"><a class="layui-layer-ico layui-layer-close layui-layer-close1"
										href="javascript:;">×</a></span>
	<div class="layui-layer-btn"><a class="layui-layer-btn0">确 定</a><a class="layui-layer-btn1">取 消</a></div>
</div>




<div class="layui-layer-shade" id="layui-layer-shade3" times="2" style="display:none;z-index:19891015;background-color:#000;opacity:0.3;filter:alpha(opacity=30);" ></div>

<div class="layui-layer layui-anim layui-layer-dialog "  id="closeOnlaodDialog" style="display: none;z-index: 19891017; margin-left: -120px" id="layui-layer2" type="dialog" times="2" showtime="0"
	 contype="string" style="z-index: 19891016; width: 330px; height: auto; top: 100px; left: 509.5px;">
	<div class="layui-layer-content">
		<div class="download-dialog">
				加载失败，请刷新
		</div>
	</div>
	<div class="layui-layer-btn"><a id="closeOnlaod">确定</a></div>
</div>


<div id="tagListBox" class="search-all-box" style="display: none"></div>
</body>
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/jquery-1.11.3.min.js"></script>
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/jquery.browser.js"></script>
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/common.js"></script>


	<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/index3.js"></script>
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/scroll.js"></script>
<script type="text/javascript" charset="utf-8" src="__STATIC__/qian/other/jquery.cookie.js"></script>


<script>

// 获取路径参数
function getUrlParam(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
    var r = window.location.search.substr(1).match(reg);  //匹配目标参数
    if (r != null) return unescape(r[2]); return null; //返回参数值
}
// book=145&page_id=1
var book_id = getUrlParam('book');
console.log(book_id);
var suinId = "";
var file_id = book_id;
var keyword =  "*";
var page_id =  1;


	$(document).ready(function(){
		var type="single";
		var currentPage =  page_id;
		function page(){

			// 单页
			if(type == "single"){
				$('#bookWrap').addClass('view-single');
				var initPage = new InitPage(type , keyword , currentPage ,file_id , suinId);
				initPage.viewTypeSingle();
				initPage.bindEvent();

			}

			// 双页
			if(type == 'double'){
				$('#bookWrap').addClass('view-double')

				var initPage = new InitPage(type , keyword , currentPage ,file_id , suinId);
				initPage.viewTypeDouble();
				initPage.bindEvent();
			}

			// 列表滚动
			if(type == 'scroll'){
				$('#bookWrap').addClass('view-scroll')

				var initPage = new InitPage(type , keyword , currentPage ,file_id , suinId);
				initPage.viewTypeScroll();
				initPage.bindEvent();

			}
		}

		page();
		
		
		

        {
	 	
		    var elem = document.getElementById('box_content');   
		    var elem2 = document.getElementById('bookWrap');  
        	var pushed = 0;
        	var lastClientX = 0;
        	var lastClientY = 0;
            elem.addEventListener('mousedown', function(e) { 
                pushed = 1;
                lastClientX = e.clientX;
                lastClientY = e.clientY;
                console.log('aaaaa');
                e.preventDefault();
                e.stopPropagation();
                 
            }, 0);
            
            window.addEventListener('mousemove', function(e) {
                if (pushed) {
                    elem2.scrollLeft -=
                        (- lastClientX + (lastClientX=e.clientX));
                    elem2.scrollTop -=
                        (- lastClientY + (lastClientY=e.clientY));
                   // console.log("scrollTop:"+elem2.scrollTop);
                }
            }, 0);
             
            window.addEventListener('mouseup', function(){
                pushed = 0;
            }, 0);
	     
		}
		// alert(getContextPath())
	});
</script>
</html>
